build_file: "androidify/kokoro/gcp_ubuntu_docker/kokoro_presubmit_build.sh"


# Fileset for the Main Phone App AAB
fileset_artifacts {
  container_name: "androidify_phone_aab"
  # Glob to capture only the main phone AAB and its specific attestation
  artifact_globs: "artifacts/androidify-release-signed.aab"
  artifact_globs: "artifacts/androidify-release-signed.aab.intoto.jsonl" # Assuming attestation is named after the AAB
  # Required to generate a unique attestation for this fileset
  store_attestation: true
  # Define destination within your GCS bucket
  destinations {
    gcs_root_dir: "androidify-app-prod-kokoro-artifacts/phone_aab/"
  }
}

# Fileset for the Wear OS App AAB
fileset_artifacts {
  container_name: "androidify_wear_aab"
  # Glob to capture only the Wear OS AAB and its specific attestation
  artifact_globs: "artifacts/wear-release-signed.aab"
  artifact_globs: "artifacts/wear-release-signed.aab.intoto.jsonl" # Assuming attestation is named after the AAB
  # Required to generate a unique attestation for this fileset
  store_attestation: true
  # Define a *different* destination for Wear artifacts
  destinations {
    gcs_root_dir: "androidify-app-prod-kokoro-artifacts/wear_aab/"
  }
}

# Example SBOM artifact for one of the filesets (adjust as needed)
fileset_artifacts {
  container_name: "androidify_sbom"
  artifact_globs: "artifacts/app-release.spdx.json"
  destinations {
    gcs_root_dir: "androidify-app-prod-kokoro-artifacts/sboms/"
  }
}

